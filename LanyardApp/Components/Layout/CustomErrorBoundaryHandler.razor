@inherits ErrorBoundary
@inject ILogger<CustomErrorBoundaryHandler> Logger
@inject IWebHostEnvironment _eApi

@ChildContent

@code {
    private ErrorBoundary? errorBoundary;

    protected override Task OnErrorAsync(Exception ex)
    {
        _tApi.SetLevel(ToastErrorLevels.Error);

        _tApi.SetTitle(ex.GetType().ToString());

        string Message = $"{ex.Message.ToString()}";

        if (_eApi.IsDevelopment())
        {
            Message = Message + $" {ex.StackTrace}";
        }

        _tApi.SetMessage(Message);

        _tApi.Show();

        errorBoundary?.Recover();

        return Task.CompletedTask;
    }
}