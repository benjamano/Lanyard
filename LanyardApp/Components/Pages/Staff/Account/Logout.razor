@page "/logout"

@using Lanyard.Application.Services
@using Lanyard.Application.Services.Authentication
@using Lanyard.App.Components.Layout.Staff

@layout AuthLayout

@inject TokenStorageService TokenStorage
@inject JwtAuthenticationStateProvider AuthStateProvider
@inject NavigationManager Navigation

@code {
    protected override async Task OnInitializedAsync()
    {
        await TokenStorage.RemoveTokenAsync();
        AuthStateProvider.NotifyAuthenticationStateChanged();
        
        // Small delay to ensure cookie is removed
        await Task.Delay(100);
        
        Navigation.NavigateTo("/login");
    }
}
