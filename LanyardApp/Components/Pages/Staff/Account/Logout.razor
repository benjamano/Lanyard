@page "/staff/logout"
@rendermode InteractiveServer

@using Lanyard.Application.Services
@using Lanyard.App.Components.Layout.Staff

@inject NavigationManager Navigation
@inject HttpClient Http

<FluentStack Orientation="Orientation.Vertical" 
              VerticalAlignment="VerticalAlignment.Center"
              HorizontalAlignment="HorizontalAlignment.Center"
              Style="min-height: 70vh; padding: 16px;">
    
    <FluentCard Style="width: 400px; max-width: 90vw; padding: 32px; text-align: center;">
        <FluentStack Orientation="Orientation.Vertical" VerticalGap="24">
            <FluentProgressRing />
            <FluentLabel Typo="Typography.Body">Logging you out...</FluentLabel>
        </FluentStack>
    </FluentCard>
</FluentStack>

@code {
    protected override async Task OnInitializedAsync()
    {
        try
        {
            // Call logout API
            await Http.PostAsync("api/auth/logout", null);
        }
        catch
        {
            // Ignore errors during logout
        }
        
        // Force full page reload to clear Blazor Server circuit
        Navigation.NavigateTo("/staff/login", forceLoad: true);
    }
}
